<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage P2P Data Products - SAP Fiori</title>
    
    <!-- SAPUI5 Bootstrap -->
    <script
        id="sap-ui-bootstrap"
        src="https://sdk.openui5.org/resources/sap-ui-core.js"
        data-sap-ui-theme="sap_horizon"
        data-sap-ui-libs="sap.m,sap.ui.layout,sap.f,sap.ui.core"
        data-sap-ui-compatVersion="edge"
        data-sap-ui-async="true"
        data-sap-ui-resourceroots='{"p2p": "./"}'>
    </script>

    <script>
        sap.ui.getCore().attachInit(function() {
            "use strict";

            // Sample data for each data product
            var oDataProducts = {
                'Supplier': {
                    title: 'Supplier Master Data',
                    icon: 'sap-icon://supplier',
                    tables: ['Suppliers'],
                    type: 'Master Data',
                    samples: 3,
                    data: [
                        { SupplierID: 'SUP-001', SupplierName: 'Global Steel Supply Inc', Country: 'US', Currency: 'USD', IsActive: 'Yes' },
                        { SupplierID: 'SUP-002', SupplierName: 'Premium Electronics GmbH', Country: 'DE', Currency: 'EUR', IsActive: 'Yes' },
                        { SupplierID: 'SUP-005', SupplierName: 'Industrial Maintenance Services', Country: 'US', Currency: 'USD', IsActive: 'Yes' }
                    ]
                },
                'PurchaseOrder': {
                    title: 'Purchase Order Data',
                    icon: 'sap-icon://order-status',
                    tables: ['PurchaseOrders', 'PurchaseOrderItems'],
                    type: 'Transaction',
                    samples: 3,
                    data: [
                        { PO_ID: 'PO-2024001', Supplier: 'SUP-001', Date: '2024-01-10', Amount: '5,250.00 USD', Status: 'Released' },
                        { PO_ID: 'PO-2024002', Supplier: 'SUP-005', Date: '2024-01-15', Amount: '10,500.00 USD', Status: 'Open' },
                        { PO_ID: 'PO-2024003', Supplier: 'SUP-002', Date: '2024-01-20', Amount: '15,488.00 EUR', Status: 'Partial' }
                    ]
                },
                'ServiceEntry': {
                    title: 'Service Entry Sheet Data',
                    icon: 'sap-icon://activities',
                    tables: ['ServiceEntrySheets', 'ServiceEntrySheetItems'],
                    type: 'Transaction',
                    samples: 2,
                    data: [
                        { SES_ID: 'SES-2024001', PO: 'PO-2024002', Date: '2024-02-20', Status: 'Accepted', Amount: '5,000.00 USD' },
                        { SES_ID: 'SES-2024002', PO: 'PO-2024004', Date: '2024-03-18', Status: 'Accepted', Amount: '2,550.00 USD' }
                    ]
                },
                'SupplierInvoice': {
                    title: 'Supplier Invoice Data',
                    icon: 'sap-icon://expense-report',
                    tables: ['SupplierInvoices', 'SupplierInvoiceItems'],
                    type: 'Transaction',
                    samples: 3,
                    data: [
                        { Invoice_ID: 'INV-2024001', Supplier: 'SUP-001', Date: '2024-02-18', Amount: '5,250.00 USD', Status: 'Paid' },
                        { Invoice_ID: 'INV-2024002', Supplier: 'SUP-005', Date: '2024-02-22', Amount: '5,250.00 USD', Status: 'Posted' },
                        { Invoice_ID: 'INV-2024003', Supplier: 'SUP-002', Date: '2024-03-05', Amount: '15,488.00 EUR', Status: 'Held' }
                    ]
                },
                'PaymentTerms': {
                    title: 'Payment Terms Data',
                    icon: 'sap-icon://payment-approval',
                    tables: ['PaymentTerms'],
                    type: 'Master Data',
                    samples: 3,
                    data: [
                        { Code: 'NET30', Name: 'Net 30 Days', NetDays: 30, DiscountDays: '-', DiscountPercent: '-' },
                        { Code: '2/10NET30', Name: '2% 10 Days Net 30', NetDays: 30, DiscountDays: 10, DiscountPercent: '2.0%' },
                        { Code: 'NET60', Name: 'Net 60 Days', NetDays: 60, DiscountDays: '-', DiscountPercent: '-' }
                    ]
                },
                'JournalEntry': {
                    title: 'Journal Entry Header Data',
                    icon: 'sap-icon://accounting-document-verification',
                    tables: ['JournalEntries', 'JournalEntryItems'],
                    type: 'Transaction',
                    samples: 3,
                    data: [
                        { Doc: '5000000001', Type: 'KR', Date: '2024-02-20', Reference: 'INV-2024001', Currency: 'USD' },
                        { Doc: '5000000002', Type: 'KZ', Date: '2024-03-20', Reference: 'PAY-2024001', Currency: 'USD' },
                        { Doc: '5000000004', Type: 'KR', Date: '2024-03-08', Reference: 'INV-2024003', Currency: 'EUR' }
                    ]
                }
            };

            // Create App
            var oApp = new sap.m.App("p2pDataProductsApp");

            // Shell Bar
            var oShellBar = new sap.f.ShellBar({
                title: "Manage P2P Data Products",
                secondTitle: "Procure-to-Pay Data Product Catalog and Database Schema"
            });

            // Icon Tab Bar
            var oIconTabBar = new sap.m.IconTabBar({
                expandable: false,
                items: [
                    new sap.m.IconTabFilter({
                        key: "overview",
                        text: "Overview",
                        icon: "sap-icon://grid",
                        content: createOverviewTab()
                    }),
                    new sap.m.IconTabFilter({
                        key: "database",
                        text: "Database Schema",
                        icon: "sap-icon://database",
                        content: createDatabaseTab()
                    }),
                    new sap.m.IconTabFilter({
                        key: "products",
                        text: "Data Products",
                        icon: "sap-icon://product",
                        content: createProductsTab()
                    }),
                    new sap.m.IconTabFilter({
                        key: "workflow",
                        text: "Workflow",
                        icon: "sap-icon://process",
                        content: createWorkflowTab()
                    }),
                    new sap.m.IconTabFilter({
                        key: "queries",
                        text: "Sample Queries",
                        icon: "sap-icon://search",
                        content: createQueriesTab()
                    }),
                    new sap.m.IconTabFilter({
                        key: "files",
                        text: "Project Files",
                        icon: "sap-icon://folder",
                        content: createFilesTab()
                    })
                ]
            });

            // Main Page
            var oPage = new sap.m.Page({
                customHeader: oShellBar,
                content: [
                    new sap.m.MessageStrip({
                        text: "This is a static HTML viewer. To query the actual database, use SQLite command line or a database tool.",
                        type: "Information",
                        showIcon: true
                    }).addStyleClass("sapUiSmallMargin"),
                    oIconTabBar
                ],
                footer: new sap.m.Bar({
                    contentMiddle: [
                        new sap.m.HBox({
                            justifyContent: "Center",
                            items: [
                                new sap.m.ObjectStatus({
                                    text: "SAP Fiori Compliant",
                                    state: "Success",
                                    icon: "sap-icon://sys-enter-2"
                                }).addStyleClass("sapUiTinyMarginEnd"),
                                new sap.m.Text({
                                    text: "Horizon Theme | SAPUI5 Framework | Updated: 2026-01-21"
                                }).addStyleClass("sapUiTinyMarginTop")
                            ]
                        })
                    ]
                })
            });

            oApp.addPage(oPage);
            oApp.placeAt("content");

            // Helper Functions
            function createOverviewTab() {
                return new sap.m.VBox({
                    items: [
                        new sap.m.Title({
                            text: "Project Statistics",
                            level: "H2"
                        }).addStyleClass("sapUiMediumMarginTop"),
                        
                        new sap.ui.layout.Grid({
                            defaultSpan: "XL3 L4 M6 S12",
                            content: [
                                createStatCard("Database Tables", "22", "Complete P2P workflow coverage", [
                                    {text: "9 Master Data", state: "Information"},
                                    {text: "13 Transaction", state: "Success"}
                                ]),
                                createStatCard("Pre-Built Views", "8", "Ready-to-use analytical queries", [
                                    {text: "Tracking", state: "None"},
                                    {text: "Performance", state: "None"}
                                ]),
                                createStatCard("Data Products", "6", "CSN schema collections", [
                                    {text: "With Sample Data", state: "Success"}
                                ]),
                                createStatCard("Workflow Steps", "7", "Complete P2P process", [
                                    {text: "End-to-End", state: "Success"}
                                ])
                            ]
                        }).addStyleClass("sapUiSmallMarginTop"),

                        new sap.m.Title({
                            text: "Key Features",
                            level: "H2"
                        }).addStyleClass("sapUiMediumMarginTop"),
                        
                        new sap.ui.layout.Grid({
                            defaultSpan: "XL4 L6 M6 S12",
                            content: [
                                createFeatureCard("‚úÖ Three-Way Matching", "Automated matching between Purchase Order, Goods Receipt or Service Entry, and Invoice with variance detection"),
                                createFeatureCard("üîî Variance Detection", "Automatic detection of price, quantity, and date variances with blocking capabilities"),
                                createFeatureCard("üí∞ Payment Management", "Payment terms with cash discounts, payment runs, and multiple payment methods"),
                                createFeatureCard("üåç Multi-Currency Support", "Support for multiple currencies (USD, EUR, SGD) with exchange rate tracking"),
                                createFeatureCard("üõ†Ô∏è Service Procurement", "Complete Service Entry Sheet workflow with manager acceptance process"),
                                createFeatureCard("üìù Complete Audit Trail", "Full tracking of who created and posted documents with timestamps")
                            ]
                        }).addStyleClass("sapUiSmallMarginTop")
                    ]
                });
            }

            function createDatabaseTab() {
                return new sap.m.VBox({
                    items: [
                        new sap.m.Bar({
                            contentLeft: [
                                new sap.m.Title({
                                    text: "Database Schema (22 Tables)",
                                    level: "H2"
                                })
                            ],
                            contentRight: [
                                new sap.m.Button({
                                    text: "Export",
                                    icon: "sap-icon://excel-attachment",
                                    press: function() {
                                        sap.m.MessageToast.show("Export functionality would be implemented here");
                                    }
                                })
                            ]
                        }),

                        new sap.m.Title({
                            text: "Master Data Tables (9)",
                            level: "H3"
                        }).addStyleClass("sapUiMediumMarginTop"),
                        
                        new sap.m.Table({
                            columns: [
                                new sap.m.Column({header: new sap.m.Text({text: "Table Name"})}),
                                new sap.m.Column({header: new sap.m.Text({text: "Description"}), minScreenWidth: "Tablet", demandPopin: true}),
                                new sap.m.Column({header: new sap.m.Text({text: "Key Fields"}), minScreenWidth: "Desktop", demandPopin: true}),
                                new sap.m.Column({header: new sap.m.Text({text: "Type"}), hAlign: "Center"})
                            ],
                            items: [
                                createTableRow("Suppliers", "Vendor master data with contact, financial, and banking info", "SupplierID, SupplierName", "Information"),
                                createTableRow("PaymentTerms", "Payment terms with discount structures", "PaymentTermsCode", "Information"),
                                createTableRow("CompanyCodes", "Legal entities", "CompanyCode, CompanyName", "Information"),
                                createTableRow("Plants", "Physical locations and delivery addresses", "PlantID, PlantName", "Information"),
                                createTableRow("CostCenters", "Cost accounting objects", "CostCenter, CostCenterName", "Information"),
                                createTableRow("Materials", "Product master data", "MaterialID, MaterialDescription", "Information"),
                                createTableRow("Services", "Service master data", "ServiceID, ServiceDescription", "Information")
                            ]
                        }).addStyleClass("sapUiSmallMarginTop"),

                        new sap.m.Title({
                            text: "Transaction Tables (13)",
                            level: "H3"
                        }).addStyleClass("sapUiMediumMarginTop"),
                        
                        new sap.m.Table({
                            columns: [
                                new sap.m.Column({header: new sap.m.Text({text: "Table Name"})}),
                                new sap.m.Column({header: new sap.m.Text({text: "Description"}), minScreenWidth: "Tablet", demandPopin: true}),
                                new sap.m.Column({header: new sap.m.Text({text: "Key Status Values"}), minScreenWidth: "Desktop", demandPopin: true})
                            ],
                            items: [
                                createTransactionTableRow("PurchaseOrders", "Purchase order headers", [
                                    {text: "Created", state: "None"},
                                    {text: "Released", state: "Success"}
                                ]),
                                createTransactionTableRow("SupplierInvoices", "Invoice headers with status tracking", [
                                    {text: "Posted", state: "Success"},
                                    {text: "Paid", state: "Success"}
                                ]),
                                createTransactionTableRow("ServiceEntrySheets", "Service confirmations", [
                                    {text: "Accepted", state: "Success"}
                                ]),
                                createTransactionTableRow("InvoicePayments", "Payment execution records", [
                                    {text: "Executed", state: "Success"}
                                ])
                            ]
                        }).addStyleClass("sapUiSmallMarginTop"),

                        new sap.m.Title({
                            text: "Pre-Built Views (8)",
                            level: "H3"
                        }).addStyleClass("sapUiMediumMarginTop"),
                        
                        new sap.m.Table({
                            columns: [
                                new sap.m.Column({header: new sap.m.Text({text: "View Name"})}),
                                new sap.m.Column({header: new sap.m.Text({text: "Purpose"})})
                            ],
                            items: [
                                createViewRow("vw_CompleteP2PTracking", "End-to-end tracking from PO to Payment"),
                                createViewRow("vw_OutstandingInvoices", "All unpaid invoices with days overdue"),
                                createViewRow("vw_InvoiceVariances", "Invoices with price or quantity variances"),
                                createViewRow("vw_SupplierPerformance", "Supplier metrics and KPIs"),
                                createViewRow("vw_ServiceEntrySheetStatus", "Service entry sheet tracking"),
                                createViewRow("vw_PurchaseOrderStatus", "Purchase order summary with quantities"),
                                createViewRow("vw_PaymentTermsUsage", "Payment terms utilization statistics"),
                                createViewRow("vw_FinancialPostings", "Journal entries with source document tracking")
                            ]
                        }).addStyleClass("sapUiSmallMarginTop")
                    ]
                });
            }

            function createProductsTab() {
                return new sap.m.VBox({
                    items: [
                        new sap.m.MessageStrip({
                            text: "Each data product is a collection container with CSN schemas and metadata. Click a card to view sample data.",
                            type: "Information",
                            showIcon: true
                        }).addStyleClass("sapUiSmallMarginTop"),

                        new sap.m.Title({
                            text: "Available Data Products (6)",
                            level: "H2"
                        }).addStyleClass("sapUiMediumMarginTop"),
                        
                        new sap.ui.layout.Grid({
                            defaultSpan: "XL4 L6 M6 S12",
                            content: Object.keys(oDataProducts).map(function(key) {
                                var product = oDataProducts[key];
                                return createProductCard(key, product.title, product.icon, product.tables.join(', '), product.type, product.samples);
                            })
                        }).addStyleClass("sapUiSmallMarginTop")
                    ]
                });
            }

            function createWorkflowTab() {
                return new sap.m.VBox({
                    items: [
                        new sap.m.Title({
                            text: "Procure-to-Pay Workflow",
                            level: "H2"
                        }),
                        
                        new sap.m.Panel({
                            headerText: "Workflow Steps",
                            content: [
                                new sap.m.VBox({
                                    alignItems: "Center",
                                    items: [
                                        createWorkflowStep("1. SUPPLIER MASTER DATA", ""),
                                        createWorkflowArrow(),
                                        createWorkflowStep("2. PURCHASE ORDER", "Release & Approval"),
                                        createWorkflowArrow(),
                                        createWorkflowBranch(),
                                        createWorkflowArrow(),
                                        createWorkflowStep("4. SUPPLIER INVOICE", "Three-Way Match & Variance Check"),
                                        createWorkflowArrow(),
                                        createWorkflowStep("5. PAYMENT PROCESSING", "Cash Discount & Payment Run")
                                    ]
                                })
                            ]
                        }).addStyleClass("sapUiSmallMarginTop"),

                        new sap.m.Title({
                            text: "Sample Process Scenarios",
                            level: "H3"
                        }).addStyleClass("sapUiMediumMarginTop"),
                        
                        createScenarioCard(
                            "Scenario 1: Material Procurement",
                            "PO-2024001 ‚Üí GR-2024001 ‚Üí INV-2024001 ‚Üí PAY-2024001",
                            "Purchase steel ‚Üí Goods received ‚Üí Invoice posted ‚Üí Payment executed",
                            "Paid",
                            "Success"
                        ),
                        
                        createScenarioCard(
                            "Scenario 2: Service Procurement",
                            "PO-2024002 ‚Üí SES-2024001 ‚Üí INV-2024002",
                            "Order maintenance ‚Üí Service performed & accepted ‚Üí Invoice posted",
                            "Posted (Unpaid)",
                            "Information"
                        )
                    ]
                });
            }

            function createQueriesTab() {
                return new sap.m.VBox({
                    items: [
                        new sap.m.MessageStrip({
                            text: "Copy these queries and run them in SQLite or your preferred database tool.",
                            type: "Information",
                            showIcon: true
                        }).addStyleClass("sapUiSmallMarginTop"),

                        new sap.m.Title({
                            text: "Sample SQL Queries",
                            level: "H2"
                        }).addStyleClass("sapUiMediumMarginTop"),

                        createQueryCard("1. Complete P2P Cycle for Specific PO", "View entire document flow from PO to Payment", "SELECT * FROM vw_CompleteP2PTracking \nWHERE PurchaseOrderID = 'PO-2024001';"),
                        createQueryCard("2. Outstanding Invoices", "Find all unpaid invoices with overdue tracking", "SELECT * FROM vw_OutstandingInvoices\nORDER BY PaymentDueDate;"),
                        createQueryCard("3. Invoices with Variances", "Find blocked invoices with price or quantity mismatches", "SELECT * FROM vw_InvoiceVariances\nWHERE BlockingReason IS NOT NULL\nORDER BY InvoiceDate DESC;"),
                        createQueryCard("4. Supplier Performance Report", "Analyze supplier metrics and KPIs", "SELECT * FROM vw_SupplierPerformance\nORDER BY TotalInvoiceAmount DESC;")
                    ]
                });
            }

            function createFilesTab() {
                return new sap.m.VBox({
                    items: [
                        new sap.m.Title({
                            text: "Project Files",
                            level: "H2"
                        }),
                        
                        createFileListCard("Database Files", [
                            {name: "p2p_complete_workflow_sqlite.sql", badges: [{text: "22 Tables", state: "Success"}, {text: "8 Views", state: "Success"}]},
                            {name: "p2p_supplier_invoice_sqlite.sql", badges: [{text: "12 Tables", state: "Information"}]}
                        ]),
                        
                        createFileListCard("CSN Model Files (English-Only)", [
                            {name: "sap-s4com-Supplier-v1.en.json", size: "~2.0 MB"},
                            {name: "sap-s4com-PurchaseOrder-v1.en.json", size: "~4.7 MB"},
                            {name: "sap-s4com-ServiceEntrySheet-v1.en.json", size: "~816 KB"},
                            {name: "sap-s4com-SupplierInvoice-v1.en.json", size: "~967 KB"},
                            {name: "sap-s4com-PaymentTerms-v1.en.json", size: "~442 KB"},
                            {name: "sap-s4com-JournalEntryHeader-v1.en.json", size: "~2.7 MB"}
                        ]),

                        new sap.m.Title({
                            text: "Quick Start Commands",
                            level: "H3"
                        }).addStyleClass("sapUiMediumMarginTop"),
                        
                        new sap.m.Panel({
                            headerText: "Create Database",
                            content: [
                                new sap.m.FormattedText({
                                    htmlText: "<pre style='background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 0.25rem; overflow-x: auto; font-family: monospace;'>sqlite3 p2p_complete.db < p2p_complete_workflow_sqlite.sql</pre>"
                                })
                            ]
                        }).addStyleClass("sapUiSmallMarginTop"),
                        
                        new sap.m.Panel({
                            headerText: "Query Database",
                            content: [
                                new sap.m.FormattedText({
                                    htmlText: "<pre style='background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 0.25rem; overflow-x: auto; font-family: monospace;'>sqlite3 p2p_complete.db\n\nsqlite> SELECT * FROM vw_CompleteP2PTracking;</pre>"
                                })
                            ]
                        }).addStyleClass("sapUiSmallMarginTop")
                    ]
                });
            }

            // Helper function to create stat cards
            function createStatCard(title, number, description, badges) {
                var oBadges = new sap.m.HBox({
                    wrap: "Wrap",
                    items: badges.map(function(badge) {
                        return new sap.m.ObjectStatus({
                            text: badge.text,
                            state: badge.state
                        }).addStyleClass("sapUiTinyMarginEnd sapUiTinyMarginTop");
                    })
                });

                return new sap.m.Panel({
                    headerText: title,
                    content: [
                        new sap.m.VBox({
                            items: [
                                new sap.m.Title({
                                    text: number,
                                    level: "H1"
                                }).addStyleClass("sapUiTinyMarginTop"),
                                new sap.m.Text({
                                    text: description
                                }).addStyleClass("sapUiTinyMarginTop"),
                                oBadges
                            ]
                        })
                    ]
                }).addStyleClass("sapUiTinyMargin");
            }

            // Helper function to create feature cards
            function createFeatureCard(title, description) {
                return new sap.m.Panel({
                    headerText: title,
                    content: [
                        new sap.m.Text({
                            text: description
                        })
                    ]
                }).addStyleClass("sapUiTinyMargin");
            }

            // Helper function to create product cards
            function createProductCard(key, title, icon, tables, type, samples) {
                return new sap.m.Panel({
                    headerText: title,
                    content: [
                        new sap.m.VBox({
                            items: [
                                new sap.m.HBox({
                                    items: [
                                        new sap.ui.core.Icon({
                                            src: icon,
                                            size: "2rem",
                                            color: "#0a6ed1"
                                        }).addStyleClass("sapUiTinyMarginEnd"),
                                        new sap.m.VBox({
                                            items: [
                                                new sap.m.Text({
                                                    text: "Tables: " + tables
                                                }).addStyleClass("sapUiTinyMarginBottom"),
                                                new sap.m.HBox({
                                                    items: [
                                                        new sap.m.ObjectStatus({
                                                            text: type,
                                                            state: type === "Master Data" ? "Information" : "Success"
                                                        }).addStyleClass("sapUiTinyMarginEnd"),
                                                        new sap.m.ObjectStatus({
                                                            text: samples + " Samples",
                                                            state: "Success"
                                                        })
                                                    ]
                                                })
                                            ]
                                        })
                                    ]
                                }).addStyleClass("sapUiTinyMarginTop"),
                                new sap.m.Button({
                                    text: "View Sample Data",
                                    type: "Emphasized",
                                    press: function() {
                                        showDataProductDialog(key);
                                    }
                                }).addStyleClass("sapUiSmallMarginTop")
                            ]
                        })
                    ]
                }).addStyleClass("sapUiTinyMargin");
            }

            // Helper function to show data product dialog
            function showDataProductDialog(productKey) {
                var product = oDataProducts[productKey];
                if (!product) return;

                // Create table columns dynamically
                var aColumns = [];
                var aHeaders = Object.keys(product.data[0]);
                aHeaders.forEach(function(header) {
                    aColumns.push(new sap.m.Column({
                        header: new sap.m.Text({text: header})
                    }));
                });

                // Create table items dynamically
                var aItems = [];
                product.data.forEach(function(row) {
                    var aCells = [];
                    aHeaders.forEach(function(header) {
                        aCells.push(new sap.m.Text({text: row[header]}));
                    });
                    aItems.push(new sap.m.ColumnListItem({
                        cells: aCells
                    }));
                });

                var oDialog = new sap.m.Dialog({
                    title: product.title,
                    contentWidth: "80%",
                    contentHeight: "70%",
                    resizable: true,
                    draggable: true,
                    stretch: false,
                    verticalScrolling: true,
                    horizontalScrolling: false,
                    content: [
                        new sap.m.Panel({
                            backgroundDesign: "Transparent",
                            content: [
                                new sap.m.HBox({
                                    alignItems: "Center",
                                    items: [
                                        new sap.ui.core.Icon({
                                            src: product.icon,
                                            size: "2rem",
                                            color: "#0a6ed1"
                                        }).addStyleClass("sapUiMediumMarginEnd"),
                                        new sap.m.VBox({
                                            items: [
                                                new sap.m.Label({
                                                    text: "Data Product Type"
                                                }),
                                                new sap.m.ObjectStatus({
                                                    text: product.type,
                                                    state: product.type === "Master Data" ? "Information" : "Success"
                                                })
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }).addStyleClass("sapUiSmallMarginBottom"),
                        new sap.m.Panel({
                            backgroundDesign: "Transparent",
                            content: [
                                new sap.m.VBox({
                                    items: [
                                        new sap.m.Title({
                                            text: "Tables Included",
                                            level: "H4"
                                        }),
                                        new sap.m.Text({
                                            text: product.tables.join(', ')
                                        }).addStyleClass("sapUiTinyMarginTop sapUiMediumMarginBottom"),
                                        new sap.m.Title({
                                            text: "Sample Data (" + product.data.length + " records)",
                                            level: "H4"
                                        }),
                                        new sap.m.Table({
                                            columns: aColumns,
                                            items: aItems
                                        }).addStyleClass("sapUiSmallMarginTop")
                                    ]
                                })
                            ]
                        })
                    ],
                    beginButton: new sap.m.Button({
                        text: "Close",
                        type: "Emphasized",
                        press: function() {
                            oDialog.close();
                        }
                    }),
                    afterClose: function() {
                        oDialog.destroy();
                    }
                });

                oDialog.open();
            }

            // Other helper functions...
            function createTableRow(name, description, keyFields, state) {
                return new sap.m.ColumnListItem({
                    cells: [
                        new sap.m.Text({text: name, wrapping: false}),
                        new sap.m.Text({text: description}),
                        new sap.m.Text({text: keyFields}),
                        new sap.m.ObjectStatus({text: "Master", state: state})
                    ]
                });
            }

            function createTransactionTableRow(name, description, statuses) {
                var oStatusBox = new sap.m.HBox({
                    wrap: "Wrap",
                    items: statuses.map(function(status) {
                        return new sap.m.ObjectStatus({
                            text: status.text,
                            state: status.state
                        }).addStyleClass("sapUiTinyMarginEnd sapUiTinyMarginTop");
                    })
                });

                return new sap.m.ColumnListItem({
                    cells: [
                        new sap.m.Text({text: name}),
                        new sap.m.Text({text: description}),
                        oStatusBox
                    ]
                });
            }

            function createViewRow(name, purpose) {
                return new sap.m.ColumnListItem({
                    cells: [
                        new sap.m.Text({text: name}),
                        new sap.m.Text({text: purpose})
                    ]
                });
            }

            function createWorkflowStep(title, subtitle) {
                var items = [
                    new sap.m.Button({
                        text: title,
                        type: "Emphasized",
                        width: "300px"
                    }).addStyleClass("sapUiTinyMarginTop")
                ];
                
                if (subtitle) {
                    items.push(new sap.m.Text({
                        text: subtitle
                    }).addStyleClass("sapUiTinyMarginTop"));
                }
                
                return new sap.m.VBox({
                    alignItems: "Center",
                    items: items
                });
            }

            function createWorkflowArrow() {
                return new sap.m.Text({
                    text: "‚Üì"
                }).addStyleClass("sapUiLargeMarginTop sapUiLargeMarginBottom");
            }

            function createWorkflowBranch() {
                return new sap.m.HBox({
                    justifyContent: "Center",
                    items: [
                        new sap.m.Button({
                            text: "3a. GOODS RECEIPT\n(Materials)",
                            type: "Accept",
                            width: "200px"
                        }).addStyleClass("sapUiTinyMarginEnd"),
                        new sap.m.Text({text: "OR"}).addStyleClass("sapUiMediumMarginTop"),
                        new sap.m.Button({
                            text: "3b. SERVICE ENTRY\n(Services)",
                            type: "Accept",
                            width: "200px"
                        }).addStyleClass("sapUiTinyMarginBegin")
                    ]
                });
            }

            function createScenarioCard(title, flow, description, status, state) {
                return new sap.m.Panel({
                    headerText: title,
                    content: [
                        new sap.m.VBox({
                            items: [
                                new sap.m.Text({
                                    text: "Flow: " + flow
                                }).addStyleClass("sapUiTinyMarginTop"),
                                new sap.m.Text({
                                    text: description
                                }).addStyleClass("sapUiTinyMarginTop"),
                                new sap.m.ObjectStatus({
                                    text: status,
                                    state: state
                                }).addStyleClass("sapUiTinyMarginTop")
                            ]
                        })
                    ]
                }).addStyleClass("sapUiSmallMarginTop");
            }

            function createQueryCard(title, description, query) {
                return new sap.m.Panel({
                    headerText: title,
                    content: [
                        new sap.m.Text({
                            text: description
                        }).addStyleClass("sapUiTinyMarginBottom"),
                        new sap.m.FormattedText({
                            htmlText: "<pre style='background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 0.25rem; overflow-x: auto; font-family: monospace; font-size: 0.875rem; line-height: 1.6;'>" + query + "</pre>"
                        })
                    ]
                }).addStyleClass("sapUiSmallMarginTop");
            }

            function createFileListCard(title, files) {
                var oList = new sap.m.List({
                    items: files.map(function(file) {
                        var description = file.desc || file.size || "";
                        if (file.badges) {
                            var badges = new sap.m.HBox({
                                wrap: "Wrap",
                                items: file.badges.map(function(badge) {
                                    return new sap.m.ObjectStatus({
                                        text: badge.text,
                                        state: badge.state
                                    }).addStyleClass("sapUiTinyMarginEnd sapUiTinyMarginTop");
                                })
                            });
                            return new sap.m.StandardListItem({
                                title: file.name,
                                description: badges
                            });
                        }
                        return new sap.m.StandardListItem({
                            title: file.name,
                            description: description
                        });
                    })
                });

                return new sap.m.Panel({
                    headerText: title,
                    content: [oList]
                }).addStyleClass("sapUiSmallMarginTop");
            }
        });
    </script>
</head>
<body class="sapUiBody" id="content">
</body>
</html>
