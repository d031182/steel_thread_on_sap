# Feng Shui Enhancement Proposal: _detect_empty_directories

**Proposal ID**: 20260212-FILE-empty_dire  
**Date**: 2026-02-12  
**Status**: PROPOSED  
**Priority**: P2 (MEDIUM)  
**Estimated Effort**: 2.0-3.0 hours

---

## üìã Issue Description

**What Feng Shui Missed**:
Empty /app folder with only __pycache__

**User Impact**:
- Feng Shui did not flag this issue
- Manual discovery required
- Could have been caught automatically

---

## üéØ Proposed Solution

### Agent: FileOrganizationAgent

**Purpose**: File structure & organization standards

**Why This Agent?**
Enhancement fits FileOrganizationAgent's purpose: 'File structure & organization standards'. Matches 1 scope/example/criteria items (weighted confidence: 0.47).

**Confidence**: 0.47 (MODERATE FIT)

---

## üõ†Ô∏è Implementation Plan

### 1. Detector: `_detect_empty_directories`

**What It Detects**:
Directories containing only build artifacts (__pycache__, .DS_Store, Thumbs.db, etc.) with no actual source files

**How It Works**:
Scan all directories recursively, check contents, flag if only artifacts present

**Example Violations**:
```python
app/  # Contains only __pycache__/ subdirectory
```

### 2. Implementation Steps

**Files to Modify**:

- `tools/fengshui/agents/fileorganization_agent.py`
  - Add _detect_empty_directories method
  - Update analyze_module() to call new detector
  - Add ARTIFACT_FILES constant

**Files to Create**:

- `tests/unit/tools/fengshui/test_detect_empty_directories.py` - Unit tests for detector

### 3. Testing Plan

**Unit Tests**:
- File: `tests/unit/tools/fengshui/test__detect_empty_directories.py`
- Coverage: 5-7 test scenarios
- Execution time: < 1s

**Integration Tests**:
- Validate detector in full Feng Shui analysis
- Test across multiple modules
- Verify no false positives

---

## üìä Estimated Effort

**Total**: 2.0-3.0 hours

**Breakdown**:
- Detector implementation: 1-1.5 hours
- Unit tests: 30-45 min
- Integration validation: 15-30 min
- Documentation: 15 min

---

## üéØ Priority Justification

**Priority**: P2 (MEDIUM)

**Reasoning**:
P2 (Medium) - Improves project cleanliness, but not critical

**Impact**:
- Improves Feng Shui coverage
- Prevents similar issues in future
- Reduces manual discovery burden

---

## ‚úÖ Acceptance Criteria

**Definition of Done**:
1. ‚úÖ Detector implemented in `FileOrganizationAgent`
2. ‚úÖ Unit tests passing (100% coverage)
3. ‚úÖ Integration test passing
4. ‚úÖ Documentation updated
5. ‚úÖ No false positives on existing codebase
6. ‚úÖ Feng Shui quality gate passing

**Validation**:
```bash
# Run detector on test case
python -c "from pathlib import Path; from tools.fengshui.agents.orchestrator import FengShuiOrchestrator; \
orchestrator = FengShuiOrchestrator(); \
report = orchestrator.analyze_module(Path('modules/test_module')); \
print(report.findings)"
```

---

## üìö Related Documentation

**Agent Documentation**:
- Purpose: File structure & organization standards
- Existing Detectors: 3
- Scope: Module directory structure, File naming conventions, Obsolete/unused files

**Similar Detectors**:
- `_detect_misplaced_tests`
- `_detect_obsolete_files`
- `_detect_naming_violations`

---

## üé¨ Next Steps

**For User** (Review & Approve):
1. Review this proposal
2. Decide: Approve, Modify, or Reject
3. If approved: Request AI to implement

**For AI** (After Approval):
1. Implement detector in `FileOrganizationAgent`
2. Write comprehensive unit tests
3. Validate across codebase
4. Update documentation
5. Commit with proposal reference

**For Shi Fu** (After Implementation):
1. Track adoption in quality metrics
2. Validate no false positives
3. Update Agent Registry with new detector

---

## üìù Decision Log

**Status**: PROPOSED  
**Date**: 2026-02-12  
**Reviewer**: [Awaiting User Review]  
**Decision**: [Pending]  
**Notes**: [To be added after review]

---

**Proposal Generated by**: Shi Fu Phase 6 Enhancement Consultant  
**Document Version**: 1.0  
**Last Updated**: 2026-02-12
