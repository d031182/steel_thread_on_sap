{
  "id": "csn-validation",
  "name": "CSN Validation",
  "version": "1.0.0",
  "description": "Validates CSN definitions against actual HANA table structures and generates SQLite schemas",
  "category": "Utility",
  "author": "P2P Development Team",
  "created": "2026-01-24",
  "status": "active",
  "dependencies": [
    "hdbcli"
  ],
  "provides": {
    "services": [
      {
        "name": "CSNValidator",
        "description": "Validate CSN field definitions against HANA reality",
        "class": "CSNValidator",
        "file": "backend/validator.py"
      }
    ]
  },
  "configuration": {
    "hana_host": {
      "type": "string",
      "default": "",
      "description": "HANA Cloud host address",
      "env": "HANA_HOST"
    },
    "hana_port": {
      "type": "number",
      "default": 443,
      "description": "HANA Cloud port",
      "env": "HANA_PORT"
    },
    "hana_user": {
      "type": "string",
      "default": "",
      "description": "HANA database user",
      "env": "HANA_USER"
    },
    "hana_password": {
      "type": "string",
      "default": "",
      "description": "HANA database password",
      "env": "HANA_PASSWORD"
    }
  },
  "features": {
    "csn_validation": "Validate CSN entities against HANA tables",
    "schema_comparison": "Compare CSN fields with HANA columns",
    "type_mapping": "Map CDS types to HANA SQL types",
    "sqlite_generation": "Generate SQLite schemas from HANA structures",
    "discrepancy_detection": "Identify missing fields and type mismatches",
    "validation_reports": "Generate detailed validation reports",
    "batch_validation": "Validate multiple entities at once"
  },
  "api": {
    "methods": [
      "connect()",
      "find_data_product_schema(product_name)",
      "get_hana_table_structure(schema_name, table_name)",
      "load_csn_file(product_name)",
      "extract_csn_entity_fields(csn, entity_name)",
      "map_cds_to_hana_type(cds_type, length, precision, scale)",
      "validate_entity(csn, entity_name, schema_name)",
      "generate_sqlite_schema(validation_result)",
      "save_validation_report(product_name, results)",
      "save_sqlite_schemas(product_name, schemas)",
      "close()"
    ]
  },
  "files": {
    "backend": [
      "backend/validator.py"
    ],
    "tests": [],
    "docs": [
      "README.md"
    ]
  },
  "integration": {
    "import": "from modules.csn_validation.backend.validator import CSNValidator",
    "usage": "validator = CSNValidator(host, port, user, password); validator.connect(); result = validator.validate_entity(csn, 'EntityName', 'SCHEMA')"
  },
  "cli": {
    "command": "python modules/csn_validation/backend/validator.py <ProductName>",
    "example": "python modules/csn_validation/backend/validator.py PurchaseOrder"
  },
  "use_cases": [
    "Validate CSN schemas before SQLite creation",
    "Ensure data model consistency",
    "Generate accurate SQLite schemas",
    "Detect schema drift between CSN and HANA",
    "Document table structures",
    "Migration validation"
  ],
  "outputs": {
    "validation_reports": "backend/database/validation/*.json",
    "sqlite_schemas": "backend/database/schema/*.sql"
  },
  "tags": ["csn", "validation", "hana", "sqlite", "schema", "data-quality"]
}