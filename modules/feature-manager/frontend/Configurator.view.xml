<mvc:View
    controllerName="modules.feature_manager.frontend.Configurator"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    displayBlock="true">
    
    <Page
        id="featureConfigPage"
        title="Feature Manager - Configuration"
        showNavButton="false"
        class="sapUiResponsiveContentPadding">
        
        <headerContent>
            <Button
                id="exportButton"
                text="Export"
                icon="sap-icon://download"
                press="onExport"
                tooltip="Export configuration"/>
            <Button
                id="importButton"
                text="Import"
                icon="sap-icon://upload"
                press="onImport"
                tooltip="Import configuration"/>
            <Button
                id="resetButton"
                text="Reset"
                icon="sap-icon://refresh"
                press="onReset"
                type="Emphasized"
                tooltip="Reset to defaults"/>
        </headerContent>
        
        <content>
            <!-- Info Message -->
            <MessageStrip
                id="infoMessage"
                text="Enable or disable modules to customize your application. Changes take effect immediately."
                type="Information"
                showIcon="true"
                class="sapUiSmallMarginBottom"/>
            
            <!-- Category Tabs -->
            <IconTabBar
                id="categoryTabs"
                select="onCategorySelect"
                expandable="false"
                class="sapUiResponsiveContentPadding">
                
                <!-- All Features Tab -->
                <items>
                    <IconTabFilter
                        id="allTab"
                        text="All Features"
                        key="all"
                        icon="sap-icon://list">
                        <List
                            id="allFeaturesList"
                            items="{/features}"
                            mode="None">
                            <items>
                                <CustomListItem>
                                    <l:Grid
                                        defaultSpan="L12 M12 S12"
                                        class="sapUiSmallMarginTop sapUiSmallMarginBottom">
                                        <l:content>
                                            <!-- Feature Info -->
                                            <VBox class="sapUiSmallMarginEnd">
                                                <Title
                                                    text="{displayName}"
                                                    level="H5"/>
                                                <Text
                                                    text="{description}"
                                                    class="sapUiTinyMarginTop"/>
                                                <Label
                                                    text="Category: {category}"
                                                    class="sapUiTinyMarginTop"/>
                                            </VBox>
                                            
                                            <!-- Toggle Switch -->
                                            <Switch
                                                state="{enabled}"
                                                customTextOn="ON"
                                                customTextOff="OFF"
                                                change="onFeatureToggle"
                                                tooltip="Enable/Disable this feature"
                                                class="sapUiSmallMarginTop"/>
                                        </l:content>
                                    </l:Grid>
                                </CustomListItem>
                            </items>
                        </List>
                    </IconTabFilter>
                    
                    <!-- Infrastructure Tab -->
                    <IconTabFilter
                        id="infrastructureTab"
                        text="Infrastructure"
                        key="Infrastructure"
                        icon="sap-icon://settings">
                        <List
                            id="infrastructureList"
                            items="{
                                path: '/features',
                                filters: [{
                                    path: 'category',
                                    operator: 'EQ',
                                    value1: 'Infrastructure'
                                }]
                            }"
                            mode="None">
                            <items>
                                <CustomListItem>
                                    <l:Grid
                                        defaultSpan="L12 M12 S12"
                                        class="sapUiSmallMarginTop sapUiSmallMarginBottom">
                                        <l:content>
                                            <VBox class="sapUiSmallMarginEnd">
                                                <Title
                                                    text="{displayName}"
                                                    level="H5"/>
                                                <Text
                                                    text="{description}"
                                                    class="sapUiTinyMarginTop"/>
                                            </VBox>
                                            <Switch
                                                state="{enabled}"
                                                customTextOn="ON"
                                                customTextOff="OFF"
                                                change="onFeatureToggle"
                                                class="sapUiSmallMarginTop"/>
                                        </l:content>
                                    </l:Grid>
                                </CustomListItem>
                            </items>
                        </List>
                    </IconTabFilter>
                    
                    <!-- Business Logic Tab -->
                    <IconTabFilter
                        id="businessTab"
                        text="Business Logic"
                        key="Business Logic"
                        icon="sap-icon://business-objects">
                        <List
                            id="businessList"
                            items="{
                                path: '/features',
                                filters: [{
                                    path: 'category',
                                    operator: 'EQ',
                                    value1: 'Business Logic'
                                }]
                            }"
                            mode="None">
                            <items>
                                <CustomListItem>
                                    <l:Grid
                                        defaultSpan="L12 M12 S12"
                                        class="sapUiSmallMarginTop sapUiSmallMarginBottom">
                                        <l:content>
                                            <VBox class="sapUiSmallMarginEnd">
                                                <Title
                                                    text="{displayName}"
                                                    level="H5"/>
                                                <Text
                                                    text="{description}"
                                                    class="sapUiTinyMarginTop"/>
                                            </VBox>
                                            <Switch
                                                state="{enabled}"
                                                customTextOn="ON"
                                                customTextOff="OFF"
                                                change="onFeatureToggle"
                                                class="sapUiSmallMarginTop"/>
                                        </l:content>
                                    </l:Grid>
                                </CustomListItem>
                            </items>
                        </List>
                    </IconTabFilter>
                    
                    <!-- Developer Tools Tab -->
                    <IconTabFilter
                        id="developerTab"
                        text="Developer Tools"
                        key="Developer Tools"
                        icon="sap-icon://wrench">
                        <List
                            id="developerList"
                            items="{
                                path: '/features',
                                filters: [{
                                    path: 'category',
                                    operator: 'EQ',
                                    value1: 'Developer Tools'
                                }]
                            }"
                            mode="None">
                            <items>
                                <CustomListItem>
                                    <l:Grid
                                        defaultSpan="L12 M12 S12"
                                        class="sapUiSmallMarginTop sapUiSmallMarginBottom">
                                        <l:content>
                                            <VBox class="sapUiSmallMarginEnd">
                                                <Title
                                                    text="{displayName}"
                                                    level="H5"/>
                                                <Text
                                                    text="{description}"
                                                    class="sapUiTinyMarginTop"/>
                                            </VBox>
                                            <Switch
                                                state="{enabled}"
                                                customTextOn="ON"
                                                customTextOff="OFF"
                                                change="onFeatureToggle"
                                                class="sapUiSmallMarginTop"/>
                                        </l:content>
                                    </l:Grid>
                                </CustomListItem>
                            </items>
                        </List>
                    </IconTabFilter>
                    
                    <!-- Demo/Testing Tab -->
                    <IconTabFilter
                        id="demoTab"
                        text="Demo/Testing"
                        key="Demo/Testing"
                        icon="sap-icon://lab">
                        <List
                            id="demoList"
                            items="{
                                path: '/features',
                                filters: [{
                                    path: 'category',
                                    operator: 'EQ',
                                    value1: 'Demo/Testing'
                                }]
                            }"
                            mode="None">
                            <items>
                                <CustomListItem>
                                    <l:Grid
                                        defaultSpan="L12 M12 S12"
                                        class="sapUiSmallMarginTop sapUiSmallMarginBottom">
                                        <l:content>
                                            <VBox class="sapUiSmallMarginEnd">
                                                <Title
                                                    text="{displayName}"
                                                    level="H5"/>
                                                <Text
                                                    text="{description}"
                                                    class="sapUiTinyMarginTop"/>
                                            </VBox>
                                            <Switch
                                                state="{enabled}"
                                                customTextOn="ON"
                                                customTextOff="OFF"
                                                change="onFeatureToggle"
                                                class="sapUiSmallMarginTop"/>
                                        </l:content>
                                    </l:Grid>
                                </CustomListItem>
                            </items>
                        </List>
                    </IconTabFilter>
                </items>
            </IconTabBar>
            
            <!-- Statistics Panel -->
            <Panel
                id="statsPanel"
                headerText="Statistics"
                expandable="true"
                expanded="false"
                class="sapUiResponsiveMargin">
                <content>
                    <l:Grid defaultSpan="L6 M6 S12">
                        <l:content>
                            <VBox class="sapUiSmallMarginEnd">
                                <Label text="Total Features" class="sapUiTinyMarginBottom"/>
                                <Title text="{/stats/total}" level="H3"/>
                            </VBox>
                            <VBox class="sapUiSmallMarginEnd">
                                <Label text="Enabled" class="sapUiTinyMarginBottom"/>
                                <Title text="{/stats/enabled}" level="H3" class="sapUiSuccessTextColor"/>
                            </VBox>
                            <VBox class="sapUiSmallMarginEnd">
                                <Label text="Disabled" class="sapUiTinyMarginBottom"/>
                                <Title text="{/stats/disabled}" level="H3" class="sapUiErrorTextColor"/>
                            </VBox>
                            <VBox>
                                <Label text="Categories" class="sapUiTinyMarginBottom"/>
                                <Title text="{/stats/categories}" level="H3"/>
                            </VBox>
                        </l:content>
                    </l:Grid>
                </content>
            </Panel>
        </content>
        
        <footer>
            <Toolbar>
                <ToolbarSpacer/>
                <Button
                    text="Refresh"
                    icon="sap-icon://synchronize"
                    press="onRefresh"
                    tooltip="Reload features from server"/>
            </Toolbar>
        </footer>
    </Page>
</mvc:View>